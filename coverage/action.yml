name: "Qlty Coverage Upload"
description: "Upload code coverage data to Qlty Cloud"
author: "Qlty"

branding:
  icon: "heart"
  color: "red"

inputs:
  token:
    description: "The Qlty Cloud coverage token"
    required: false
    default: ""

  coverage-token:
    description: "[DEPRECATED] The Qlty Cloud coverage token"
    deprecationMessage: Please use `token` instead of `coverage-token`.
    required: false
    default: ""

  oidc:
    description: "Use OIDC instead of a coverage token"
    required: false
    default: false

  files:
    description: "The paths to the coverage reports files"
    required: true

  add-prefix:
    description: "Add a prefix to the coverage data"
    required: false
    default: ""

  strip-prefix:
    description: "Strip a prefix to the coverage data"
    required: false
    default: ""

  tag:
    description: "The tag to use when uploading coverage data"
    required: false
    default: ""

  verbose:
    description: "Verbose output for debugging"
    required: false
    default: false

  skip-errors:
    description: "Do not error the action if the upload fails"
    required: false
    default: true

  skip-missing-files:
    description: "Files not in the directory are skipped"
    required: false
    default: false

  total-parts-count:
    description: "The total number of coverage uploads that qlty cloud should expect"
    required: false

  cli-version:
    description: "The version of the Qlty CLI to use (e.g., '1.2.3' or 'v1.2.3')"
    required: false
    default: ""

runs:
  using: node20
  main: dist/index.js
